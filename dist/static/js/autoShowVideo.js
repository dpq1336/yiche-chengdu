function getData(t,e){var a;return $.ajax({type:"GET",data:{param:JSON.stringify(e)},dataType:"json",url:t,async:!1,success:function(t){a=t}}),a}function postData(t,e){var a;return $.ajax({type:"POST",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",url:t,async:!1,success:function(t){a=t}}),a}$(".tabbox li").click(function(){var t=$(this).index();switch(console.log(t,"index"),t){case 0:videoParamData.pageIndex=0,videoParamData.sort="0",renderDat={},$("#videoObj").html(template("video-tpl",renderDat)),getVideoData();break;case 1:videoParamData.pageIndex=0,videoParamData.sort="2",renderDat={},$("#videoObj").html(template("video-tpl",renderDat)),getVideoData();break;default:return}$(this).addClass("active").siblings().removeClass("active"),$(".main_card>div").eq(t).show().siblings().hide()}),$(".change").click(function(){(sortExpertList=renderDat.expertList).sort(randomSort),renderDat.expertList=sortExpertList,console.log("换一换",renderDat.expertList),$("#yicheObj").html(template("yiche-tpl",renderDat))});var publicParam={cid:"502",ver:"6.6.3",uid:"45022498"};function setParamFun(t){return publicParam.param=t,publicParam}function randomSort(t,e){return.5<Math.random()?-1:1}function fllow(t,e,a){console.log("关注=============",t),1==postData(baseUrl+"/web_exhibition/api/v1/common/follow",setParamFun({uid:uid||"45022498",type:1,followUid:t.attr("uid")})).status?(console.log("关注成功"),t.addClass(e),t.removeClass(a),t.html("已关注")):console.log("关注失败")}function unFllow(t,e,a){console.log("取消关注=============",t),1==postData(baseUrl+"/web_exhibition/api/v1/common/follow",setParamFun({uid:uid||"45022498",type:2,followUid:t.attr("uid")})).status?(console.log("取消关注成功"),t.addClass(e),t.removeClass(a),t.html("关注TA")):console.log("取消关注失败")}$("#yicheObj").on("click","a.btn_fllow",function(t){console.log("换一换--关注",$(this).attr("uid")),isLoginFlag&&fllow($(this),"btn_gray","btn_fllow")}),$("#yicheObj").on("click","a.btn_gray",function(t){console.log("换一换--取消关注",$(this).attr("uid")),isLoginFlag&&unFllow($(this),"btn_fllow","btn_gray")}),$("#videoObj").on("click","a.guanz",function(t){console.log("推荐列表关注",$(this).attr("uid")),isLoginFlag&&fllow($(this),"yiguanzhu","guanz")}),$("#videoObj").on("click","a.yiguanzhu",function(t){console.log("推荐列表关注",$(this).attr("uid")),isLoginFlag&&unFllow($(this),"guanz","yiguanzhu")});var baseUrl="https://mapi.yiche.com",uid=0,isLoginFlag=window.Bitauto.Login.result.isLogined;isLoginFlag&&(uid=window.Bitauto.Login.result.userId);var bannerList=[],expertList=[],sortExpertList=[],videoList=[],renderDat={},bannerUrl=baseUrl+"/web_exhibition/api/v1/common/get_focus_frame?cid=502&ver=6.6.3&uid="+uid,banneParamData={frameId:153},expertUrl=baseUrl+"/web_exhibition/api/v1/common/author_recommend_list?cid=502&ver=6.6.3&uid="+uid,expertParamData={frameId:1,categoryIds:"122"},videoUrl=baseUrl+"/web_exhibition/api/v1/vedio/get_vedio_list?cid=502&ver=6.6.3&uid="+uid,videoParamData={tagIds:229427,startTime:"2019-04-01",endTime:"2019-04-15",sort:0,pageIndex:0,pageSize:12,type:1,uid:""},loadMore=!0;function getBannerData(){var t=getData(bannerUrl,banneParamData);1==t.status&&t.data&&(bannerList=t.data,renderDat.bannerListA=bannerList.slice(0,1),renderDat.bannerListB=bannerList.slice(1,5),$("#bannerObj").html(template("banner-tpl",renderDat)))}function getExpertData(){var t=getData(expertUrl,expertParamData);if(1==t.status&&t.data){expertList=t.data;for(var e=0;e<expertList.length;e++)null!=expertList[e].avatarpath?expertList[e].avatarpath=expertList[e].avatarpath.replace(/\{0\}/,120):expertList[e].avatarpath="https://pic.baa.bitautotech.com/newavatar/120.jpg";console.log("车展视频专家列表数据===",expertList),renderDat.expertList=expertList.slice(0,10);var a={};a.isLogin=isLoginFlag,a.expertList=renderDat.expertList,$("#yicheObj").html(template("yiche-tpl",a))}}function getVideoData(){var t=getData(videoUrl,videoParamData);if(1==t.status&&t.data.list){if(videoList=t.data.list,console.log("车展视频列表数据===",videoList),console.log("videoParamData.pageIndex",videoParamData.pageIndex),videoParamData.pageIndex*videoParamData.pageSize>=t.data.count&&0==videoList.length)return console.log("111页面 和返回条数为0 不加载接口"),loadMore=!1,void $(".load_more").text("");console.log("222"),loadMore=!0,renderDat.videoList=videoList;var e={};e.isLogin=isLoginFlag,e.videoList=renderDat.videoList,console.log("新数组======",e),$("#videoObj").append(template("video-tpl",e))}}getBannerData(),getExpertData(),getVideoData(),$(window).on("scroll",function(){var t=document.documentElement.scrollTop||document.body.scrollTop;(document.documentElement.scrollHeight||document.body.scrollHeight)-(document.documentElement.clientHeight||document.body.clientHeight)-100<=t&&(console.log("loadMore",loadMore),loadMore&&(videoParamData.pageIndex+=1,$(".load_more").text("正在加载..."),getVideoData()))});
//# sourceMappingURL=autoShowVideo.js.map
