var pageIndex=1,isLoad=!0;function getData(e,a){var i;return $.ajax({type:"GET",data:{param:JSON.stringify(a)},dataType:"json",url:e,async:!1,success:function(e){i=e}}),i}function postData(e,a){var i;return $.ajax({type:"POST",data:a,dataType:"json",url:e,async:!1,success:function(e){i=e}}),i}var timeoutflag=null;if($(".carShow ul").on("mouseover","span",function(e){$(this).next().css("display","block"),null!=timeoutflag&&clearTimeout(timeoutflag),timeoutflag=setTimeout(function(){getCarReport($(this).attr("brandid"))},500)}),$(".carShow ul ").on("mouseleave",".report",function(e){$(this).find(".carreport").css("display","none")}),$(".search .level span").click(function(){$(this).addClass("click-chinese").siblings().removeClass("click-chinese"),$(".brand span").removeClass("click-chinese click-english"),$(".venue span").removeClass("click-chinese"),getSearch(level=$(this).attr("level")),pageIndex=1,isLoad=!0}),$(".search .brand ").children().eq(1).click(function(){$(this).addClass("click-chinese").siblings().removeClass("click-chinese click-english"),$(".level span").removeClass("click-chinese"),$(".venue span").removeClass("click-chinese"),console.log($(".search_brand span")),$(".search_brand").empty(),getSearch()}),$(".search .brand .search_brand ").on("click","span",function(){$(this).addClass("click-chinese").siblings().removeClass("click-chinese"),$(".level span").removeClass("click-chinese"),$(".venue span").removeClass("click-chinese"),getSearch(-1,$(this).attr("mab"),-1),pageIndex=1,isLoad=!0}),$(".search .venue ").on("click","span",function(){$(this).addClass("click-chinese").siblings().removeClass("click-chinese"),$(".level span").removeClass("click-chinese"),$(".brand span").removeClass("click-chinese click-english"),console.log(2233),getSearch(-1,-1,$(this).attr("pavilion")),pageIndex=1,isLoad=!0}),$(".search button").click(function(){$(".level span").removeClass("click-chinese"),$(".brand span").removeClass("click-chinese click-english"),$(".venue span").removeClass("click-chinese"),getSearch()}),window.Bitauto.Login.result.isLogined)var uid=window.Bitauto.Login.result.userId;else uid=0;var url="https://mapi.yiche.com/web_exhibition/api/v1/new_car_exhibition/get_car_conditions?cid=502&ver=6.6.3&uid="+uid,res=getData(url,{exhibitionId:273});function getSearch(e,a,i){var s={exhibitionId:273,level:e||-1,mab:a||-1,pavilion:i||-1,size:12,pageIndex:1};if(window.Bitauto.Login.result.isLogined)var n=window.Bitauto.Login.result.userId;else n=0;var t=getData("https://mapi.yiche.com/web_exhibition/api/v1/new_car_exhibition/get_car_search_result?cid=502&ver=6.6.3&uid="+n,s);t.data.list.map(function(e){e.pavilionNames?e.pavilionNames=e.pavilionNames.join(" "):e.pavilionNames=""}),console.log(t.data.list),$(".clear").html(template("carShow",t.data))}function addSearch(e,a,i,s){var n={exhibitionId:273,level:e||-1,mab:a||-1,pavilion:i||-1,size:12,pageIndex:s};if(window.Bitauto.Login.result.isLogined)var t=window.Bitauto.Login.result.userId;else t=0;var l=getData("https://mapi.yiche.com/web_exhibition/api/v1/new_car_exhibition/get_car_search_result?cid=502&ver=6.6.3&uid="+t,n);0==l.data.list.length&&(isLoad=!1),l.data.list.map(function(e){e.pavilionNames?e.pavilionNames=e.pavilionNames.join(" "):e.pavilionNames=""}),console.log(l.data.list),$(".clear").append(template("carShowAdd",l.data))}function getCarReport(e){var a={tagIds:1,serialIds:e};if(window.Bitauto.Login.result.isLogined)var i=window.Bitauto.Login.result.userId;else i=0;var s=getData("https://mapi.yiche.com/web_exhibition/api/v1/new_car_exhibition/get_car_report?cid=502&ver=6.6.3&uid="+i,a);console.log(s,1111111);s.data&&$(".carreport").html(template("search-carreport",{total:2,list:[{newsId:6798277,title:"丰田发布两款全新概念车 丰巢FUN/丰巢WAY",url:"/info/6798277.html"},{newsId:6795264,title:"丰田携两款概念车亮相上海车展 共同领略丰田TNGA",url:"/info/6795264.html"},{newsId:6795268,title:"丰田携两款概念车亮相上海车展 一起来看吧",url:"/info/6795264.html"}]}))}console.log(res),$(".up").on("click","span",function(){$(this).addClass("click-english").siblings().removeClass("click-english"),$(this).parent().find(".nolimit").removeClass("click-chinese"),$(".level span").removeClass("click-chinese"),$(".venue span").removeClass("click-chinese"),$(".nolimit").removeClass("click-chinese");var s=$(this).text();console.log(res.data.mabPara,333),res.data.mabPara.map(function(e,a,i){e.spellFirst==s&&(console.log(e),$(".search_brand").html(template("search-mab",e)))})}),$(".up").html(template("search",res.data)),$(".venue").append(template("search-venue",res.data)),getSearch(),window.onscroll=function(e){var a=document.documentElement.scrollTop||document.body.scrollTop,i=document.documentElement.scrollHeight||document.body.scrollHeight,s=document.documentElement.clientHeight||document.body.clientHeight;console.log(a,i,s),i-s<=a&&$(".search span").map(function(e,a){if(-1!=a.className.indexOf("click-chinese")){var i=$(".search span").eq(e),s=i.attr("level"),n=i.attr("mab"),t=i.attr("pavilion");console.log(s,n,t),s?isLoad&&(console.log("懒加载开始"),addSearch(s,-1,-1,pageIndex),pageIndex++):n?isLoad&&(console.log("懒加载开始"),addSearch(-1,n,-1,pageIndex),pageIndex++):isLoad&&(console.log("懒加载开始"),addSearch(-1,-1,t,pageIndex),pageIndex++)}else isLoad&&(console.log("懒加载开始"),addSearch(-1,-1,-1,pageIndex),pageIndex++)})};
//# sourceMappingURL=newCarShow.js.map
